<!DOCTYPE html>
<html>
  <head>
    <title>JsLisp test</title>
    <meta charset="utf-8">
    <meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1.0, maximum-scale=1.0" />
    <link rel="stylesheet" type="text/css" href="style.css" />
  </head>
  <body>
    <h1>JsLisp test</h1>

    <!-- You can access lisp function under `LISP` and can call it. -->
    <form onsubmit="print('fib(' + this.num.value + ') = ' + LISP.fib(parseInt(this.num.value))); return false;">
      Fib <input id="num" type="number" min="0" value="30">
      <input type="submit">
    </form>

    <h3>Result</h3>
    <div id="terminal">
    </div>

    <script type="text/javascript" src="../../lisp2js.js"></script>
    <script type="text/javascript">
      function print(str) {
        var terminalNode = document.getElementById('terminal');
        var div = document.createElement('div');
        div.appendChild(document.createTextNode(str));
        terminalNode.appendChild(div);
      }
      // Steal Lisp output.
      LISP._output = print;
    </script>

    <script src="jslisp.js">
;; Hello world
(print "Hello, world!")
    </script>

    <script src="jslisp.js">
;; Calculate Fibonacci number
(defun fib (n)
  (if (< n 2)
      n
    (+ (fib (- n 1))
       (fib (- n 2)))))
    </script>

    <script src="jslisp.js">
;; Call JavaScript function
;; `JS` is JavaScript global hash table.
;; Can access with 'dot'
(JS.alert "Welcome to JsLisp!")
    </script>
  </body>
</html>
