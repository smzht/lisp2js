<!DOCTYPE html>
<html>
  <head>
    <title>JsLisp test</title>
    <meta charset="utf-8">
    <meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1.0, maximum-scale=1.0" />
    <link rel="stylesheet" type="text/css" href="style.css" />
  </head>
  <body>
    <h1>JsLisp test</h1>

    <h3>Result</h3>
    <div id="terminal">
    </div>

    <script type="text/javascript" src="../../runtime/lisp.js"></script>
    <script type="text/javascript" src="../../lisp2js.js"></script>
    <script type="text/javascript">
      // Steal Lisp output.
      LISP._output = function(str) {
        var terminalNode = document.getElementById('terminal');
        var div = document.createElement('div');
        div.appendChild(document.createTextNode(str));
        terminalNode.appendChild(div);
      }
    </script>

    <script src="jslisp.js">
;; Calculate Fibonacci number
(define (fib n)
  (if (< n 2)
      n
    (+ (fib (- n 1))
       (fib (- n 2)))))

(print (+ "fib30 = " (fib 30)))
    </script>

    <script src="jslisp.js">
;; Call JavaScript function
;; `JS` is JavaScript global hash table.
(define-macro (jscall name . args)
  `((hash-table-get JS ,(symbol->string name))
    ,@args))
(jscall alert "Hello, JsLisp!")
    </script>
  </body>
</html>
